var static_count=10;var variable_count=static_count;var timer=null;var curr_active=null;var paused=false;$(document).ready(function(){$("#bottom_buttons").css("display","inherit");$("#nojs_text").css("display","none");load_anchor();watch();$("#app").submit(function(a){a.preventDefault();submit_form()});$("#watch").click(function(){watch()});$("#dns_nav").click(function(a){a.preventDefault(a);active(this);load_app("dns","DNS");enable_watch();response_navbar();return false});$("#subnet_nav").click(function(a){a.preventDefault(a);active(this);load_app("subnet","Subnet");disable_watch();response_navbar();return false});$("#curl_nav").click(function(a){a.preventDefault(a);active(this);load_app("curl","cURL");enable_watch();response_navbar();return false});$("#oui_nav").click(function(a){a.preventDefault(a);active(this);load_app("oui","OUI");disable_watch();response_navbar();return false});$("#ping_nav").click(function(a){a.preventDefault(a);active(this);load_app("ping","Ping");enable_watch();response_navbar();return false});$("#traceroute_nav").click(function(a){a.preventDefault(a);active(this);load_app("traceroute","Traceroute");enable_watch();response_navbar();return false});$("#whois_nav").click(function(a){a.preventDefault(a);active(this);load_app("whois","Whois");disable_watch();response_navbar();return false});$("#rphash_nav").click(function(a){a.preventDefault(a);active(this);load_app("rphash","RPHash");disable_watch();response_navbar();return false});$("#clear_scrollback").click(function(){$("#term").empty()});$("#nav_icon").click(function(){response_navbar()})});function disable_watch(){$("#watch").attr("disabled",true);$("#watch").attr("checked",false);$("#timer").css("visibility","hidden");clearInterval(timer)}function enable_watch(){$("#watch").attr("disabled",false)}function active(a){if(curr_active!=null){$(curr_active).attr("class","")}curr_active=a;$(a).attr("class","active")}function start_timer(){timer=setInterval(function(){countdown();$("#timer").css("visibility","visible")},1000)}function countdown(a){if(!paused){variable_count=variable_count-1;document.getElementById("timer").innerHTML=variable_count;if(variable_count==0){paused=true;submit_form();variable_count=static_count}}}function watch(){var a=$("#watch").is(":checked");if(a){variable_count=static_count;start_timer()}else{try{clearInterval(timer);$("#timer").css("visibility","hidden")}catch(b){}}}function submit_form(){var b=document.getElementById("app").firstChild;classes=b.classList;$("#submit_app").attr("disabled",true);$("#term").addClass("spinner");if(classes.contains("curl")){var a=$("[name=url]").val();var j=$("[name=follow_redirects]").is(":checked");$.ajax({url:"/tools/curl",type:"post",cache:false,data:{url:a,follow_redirects:j},success:function(m){set_location("/tools/curl?url="+a+"&follow_redirects="+j);post_success(m)},error:function(){post_failed()}})}else{if(classes.contains("dns")){var a=$("[name=url]").val();var e=$("[name=record_type]").val();var d=$("[name=user_resolver]").val();$.ajax({url:"/tools/dns",type:"post",cache:false,data:{url:a,record_type:e,user_resolver:d},success:function(m){set_location("/tools/dns?url="+a+"&record_type="+e+"&user_resolver="+d);post_success(m)},error:function(){post_failed()}})}else{if(classes.contains("subnet")){var c=$("[name=ip_address]").val();var g=$("[name=subnet_mask]").val();$.ajax({url:"/tools/subnet",type:"post",cache:false,data:{ip_address:c,subnet_mask:g},success:function(m){set_location("/tools/subnet?ip_address="+c+"&subnet_mask="+g);post_success(m)},error:function(){post_failed()}})}else{if(classes.contains("oui")){var l=$("[name=mac_address]").val();$.ajax({url:"/tools/oui",type:"post",cache:false,data:{mac_address:l},success:function(m){set_location("/tools/oui?mac_address="+l);post_success(m)},error:function(){post_failed()}})}else{if(classes.contains("ping")){var f=$("[name=hostname]").val();$.ajax({url:"/tools/ping",type:"post",cache:false,data:{hostname:f},success:function(m){set_location("/tools/ping?hostname="+f);post_success(m)},error:function(){post_failed()}})}else{if(classes.contains("traceroute")){var f=$("[name=hostname]").val();$.ajax({url:"/tools/traceroute",type:"post",cache:false,data:{hostname:f},success:function(m){set_location("/tools/traceroute?hostname="+f);post_success(m)},error:function(){post_failed()}})}else{if(classes.contains("whois")){var f=$("[name=hostname]").val();$.ajax({url:"/tools/whois",type:"post",cache:false,data:{hostname:f},success:function(m){set_location("/tools/whois?hostname="+f);post_success(m)},error:function(){post_failed()}})}else{if(classes.contains("rphash")){alert("hwo");var i=$("[name=rp_address]").val();var h=$("[name=group]").val();var k=$("[name=mask]").val();$.ajax({url:"/tools/rphash",type:"post",cache:false,data:{rp_address:i,group:h,mask:k},success:function(m){set_location("/tools/rphash?rp_address="+i+"&group="+h+"&mask="+k);post_success(m)},error:function(){post_failed()}})}}}}}}}}}function post_success(a){update_term(a);paused=false;$("#submit_app").attr("disabled",false);$("#term").removeClass("spinner")}function post_failed(){paused=false;$("#submit_app").attr("disabled",false);$("#term").removeClass("spinner")}function update_term(a){$("#term").append(a);var b=document.getElementById("term");b.scrollTop=b.scrollHeight}function load_app(b,a){$("#app").load("/tools/"+b+" #app");active($("#"+b+"_nav"));document.title="NTN - "+a;set_location("/tools/"+b)}function load_anchor(){switch($(location).attr("pathname")){case"/tools/curl":enable_watch();active($("#curl_nav"));return;case"/tools/dns":enable_watch();active($("#dns_nav"));return;case"/tools/ping":enable_watch();active($("#ping_nav"));return;case"/tools/oui":active($("#oui_nav"));return;case"/tools/subnet":active($("#subnet_nav"));return;case"/tools/traceroute":enable_watch();active($("#traceroute_nav"));return;case"/tools/whois":active($("#whois_nav"));return;case"/tools/rphash":active($("#rphash_nav"));return}}function response_navbar(){var a=document.getElementById("navbar");if(a.className==="navbar"){a.className+=" responsive"}else{a.className="navbar"}}function set_location(a){window.history.pushState(null,null,a)};